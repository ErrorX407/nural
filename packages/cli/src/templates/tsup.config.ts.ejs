import { defineConfig } from "tsup";

export default defineConfig({
  // 游릭 Entry Point: The main server file
  entry: ["src/main.ts"],

  // 游릭 Output Format: CommonJS (standard for Node backend)
  // You can add 'esm' if you want dual-publishing, but 'cjs' is safest for app deployment
  format: ["cjs"],

  // 游릭 Environment Target
  target: "node18",

  // 游릭 Optimization
  clean: true,       // Clean dist/ before build
  minify: true,      // Minify output for smaller docker images
  sourcemap: true,   // Generate sourcemaps for production debugging
  splitting: false,  // Bundle into a single file for easier deployment
  
  // 游릭 Type Checking (Optional, usually handled by CI/CD)
  dts: false,
  
  // 游릭 Exclude test files from build
  ignoreWatch: ["**/*.test.ts", "**/*.spec.ts"],
});