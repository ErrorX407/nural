import { defineExceptionFilter } from "@nuraljs/core";

export const <%= camelName %>Filter = defineExceptionFilter(async (err, req, res, ctx) => {
  console.error(`[${ctx.handlerName}] Error:`, err);

  if (err.message === "Unauthorized") {
    res.status(401).send({
      success: false,
      error: "You shall not pass!",
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Pass to next filter or default handler if not handled
  throw err;
});